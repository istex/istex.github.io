!function(t){function e(){}function i(t){a=[t]}function s(t,e,i){return t&&t.apply(e.context||e,i)}function n(t){return/\?/.test(t)?"&":"?"}function r(r){function p(t){H++||(Z(),U&&(k[W]={s:[t]}),O&&(t=O.apply(r,[t])),s(q,r,[t,I,r]),s(M,r,[r,I]))}function j(t){H++||(Z(),U&&t!=w&&(k[W]=t),s(z,r,[r,t]),s(M,r,[r,t]))}r=t.extend({},E,r);var D,_,R,F,N,q=r.success,z=r.error,M=r.complete,O=r.dataFilter,L=r.callbackParameter,Q=r.callback,G=r.cache,U=r.pageCache,V=r.charset,W=r.url,X=r.data,$=r.timeout,H=0,Z=e;return P&&P(function(t){t.done(q).fail(z),q=t.resolve,z=t.reject}).promise(r),r.abort=function(){!H++&&Z()},s(r.beforeSend,r,[r])===!1||H?r:(W=W||u,X=X?"string"==typeof X?X:t.param(X,r.traditional):u,W+=X?n(W)+X:u,L&&(W+=n(W)+encodeURIComponent(L)+"=?"),!G&&!U&&(W+=n(W)+"_"+(new Date).getTime()+"="),W=W.replace(/=\?(&|$)/,"="+Q+"$1"),U&&(D=k[W])?D.s?p(D.s[0]):j(D):(A[Q]=i,R=t(y)[0],R.id=f+T++,V&&(R[o]=V),B&&B.version()<11.6?(F=t(y)[0]).text="document.getElementById('"+R.id+"')."+m+"()":R[l]=l,S&&(R.htmlFor=R.id,R.event=h),R[g]=R[m]=R[x]=function(t){if(!R[v]||!/i/.test(R[v])){try{R[h]&&R[h]()}catch(e){}t=a,a=0,t?p(t[0]):j(c)}},R.src=W,Z=function(){N&&clearTimeout(N),R[x]=R[g]=R[m]=null,C[b](R),F&&C[b](F)},C[d](R,_=C.firstChild),F&&C[d](F,_),N=$>0&&setTimeout(function(){j(w)},$)),r)}var a,l="async",o="charset",u="",c="error",d="insertBefore",f="_jqjsp",p="on",h=p+"click",m=p+c,g=p+"load",x=p+"readystatechange",v="readyState",b="removeChild",y="<script>",I="success",w="timeout",A=window,P=t.Deferred,C=t("head")[0]||document.documentElement,k={},T=0,E={callback:f,url:location.href},B=A.opera,S=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;r.setup=function(e){t.extend(E,e)},t.jsonp=r}(jQuery),function(t){"use strict";var e,i=t.Base64,s="2.1.6";"undefined"!=typeof module&&module.exports&&(e=require("buffer").Buffer);var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(t){for(var e={},i=0,s=t.length;s>i;i++)e[t.charAt(i)]=i;return e}(n),a=String.fromCharCode,l=function(t){if(t.length<2){var e=t.charCodeAt(0);return 128>e?t:2048>e?a(192|e>>>6)+a(128|63&e):a(224|e>>>12&15)+a(128|e>>>6&63)+a(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|e>>>18&7)+a(128|e>>>12&63)+a(128|e>>>6&63)+a(128|63&e)},o=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(t){return t.replace(o,l)},c=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),s=[n.charAt(i>>>18),n.charAt(i>>>12&63),e>=2?"=":n.charAt(i>>>6&63),e>=1?"=":n.charAt(63&i)];return s.join("")},d=t.btoa?function(e){return t.btoa(e)}:function(t){return t.replace(/[\s\S]{1,3}/g,c)},f=e?function(t){return new e(t).toString("base64")}:function(t){return d(u(t))},p=function(t,e){return e?f(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):f(String(t))},h=function(t){return p(t,!0)},m=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return a((i>>>10)+55296)+a((1023&i)+56320);case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},x=function(t){return t.replace(m,g)},v=function(t){var e=t.length,i=e%4,s=(e>0?r[t.charAt(0)]<<18:0)|(e>1?r[t.charAt(1)]<<12:0)|(e>2?r[t.charAt(2)]<<6:0)|(e>3?r[t.charAt(3)]:0),n=[a(s>>>16),a(s>>>8&255),a(255&s)];return n.length-=[0,0,2,1][i],n.join("")},b=t.atob?function(e){return t.atob(e)}:function(t){return t.replace(/[\s\S]{1,4}/g,v)},y=e?function(t){return new e(t,"base64").toString()}:function(t){return x(b(t))},I=function(t){return y(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var e=t.Base64;return t.Base64=i,e};if(t.Base64={VERSION:s,atob:b,btoa:d,fromBase64:I,toBase64:p,utob:u,encode:p,encodeURI:h,btou:x,decode:I,noConflict:w},"function"==typeof Object.defineProperty){var A=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",A(function(){return I(this)})),Object.defineProperty(String.prototype,"toBase64",A(function(t){return p(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",A(function(){return p(this,!0)}))}}}(this),this.Meteor&&(Base64=global.Base64);var istexConfigDefault={istexApi:"https://api.istex.fr",query:"",showPagination:!0,pageSize:50,maxPagesInPagination:10,abstractLength:250,titleLength:100,fullTextOnTitle:"pdf",connectedEventName:"istex-connected",resultsEventName:"istex-results",gotoPageEventName:"istex-gotopage",waitingForResultsEventName:"istex-waiting-for-results"};if(!istexConfig)var istexConfig={};!function(t,e){function i(e,i){this.elt=e,this.settings=t.extend({},n,istexConfig,i),this._defaults=n,this._name=s,this.init()}var s="istexAuth",n=istexConfigDefault;i.prototype.init=function(){var e=this;e.getAuthMode(function(i,s,n){"none"==s?(e.setupGenericRequester(n),e.removeConnectBtn(),t.event.trigger(e.settings.connectedEventName,[e])):"redirect"==s?e.authWithRedirect(function(i){i||(e.setupGenericRequester(n),e.removeConnectBtn(),t.event.trigger(e.settings.connectedEventName,[e]))}):"http"==s&&e.authWithHTTP(function(i,s){i||(e.setupGenericRequester(n,s),e.removeConnectBtn(),t.event.trigger(e.settings.connectedEventName,[e]))})})},i.prototype.getAuthMode=function(e){var i=this;t.ajax({url:i.settings.istexApi+"/corpus/",success:function(){return e(null,"none","ajax")},error:function(s){return 0!==s.status&&302!==s.status?e(null,"http","ajax"):void t.jsonp({url:i.settings.istexApi+"/corpus/",callbackParameter:"callback",success:function(){e(null,"none","jsonp")},error:function(){e(null,"redirect","jsonp")}})}})},i.prototype.authWithRedirect=function(i){var s=this;s.insertConnectBtnIfNotExists(function(){e.open(s.settings.istexApi+"/ezproxy-auth-and-close.html"),t(e).focus(function(){s.getAuthMode(function(t,e){i("none"==e?null:new Error("Unable to authenticate"))})})})},i.prototype.insertConnectBtnIfNotExists=function(e){var i=this;if(!(t(i.elt).find(".istex-ezproxy-auth-btn").length>0)){var s=t('<button class="istex-ezproxy-auth-btn">Se connecter<div></div></button>').hide();t(i.elt).append(s),s.fadeIn(),t(i.elt).find(".istex-ezproxy-auth-btn").click(e)}},i.prototype.removeConnectBtn=function(){var e=this;t(e.elt).find(".istex-ezproxy-auth-btn").remove()},i.prototype.authWithHTTP=function(e){var i=this;i.insertConnectBtnIfNotExists(function(s){if(!(t(i.elt).find(".istex-auth-form").length>0)){var n=t(s.target);n.hide();var r=t('<form class="istex-auth-form"><div class="istex-auth-form-wrapper"><input class="istex-auth-form-login" type="text" value="" placeholder="Votre login ..." /><input class="istex-auth-form-password" type="password" value="" placeholder="Votre mot de passe ..." /><input class="istex-auth-form-submit" type="submit" value="Se connecter" default="default"/><button class="istex-auth-form-cancel">Annuler</button></div><p class="istex-auth-form-info"><a href="https://ia.inist.fr/people/newer" target="_blank">S\'inscrire</a> | <a href="https://ia.inist.fr/auth/retrieve" target="_blank">Retrouver son mot de passe</a> | <a href="mailto:istex@inist.fr?subject=Demande d\'un accès à la plateforme ISTEX">Demander une autorisation Istex</a></p><p class="istex-auth-form-error"></p></form>').hide();t(i.elt).append(r),r.fadeIn(),t(i.elt).find(".istex-auth-form-login").focus(),t(i.elt).find(".istex-auth-form-cancel").click(function(){return t(i.elt).find(".istex-auth-form").remove(),n.fadeIn(),!1}),t(i.elt).find(".istex-auth-form").submit(function(){r.find("input").attr("disabled","disabled"),t(i.elt).find(".istex-auth-form-error").hide();var s={headers:{Authorization:"Basic "+Base64.encode(t(i.elt).find(".istex-auth-form-login").val()+":"+t(i.elt).find(".istex-auth-form-password").val())}};return t.ajax({url:i.settings.istexApi+"/corpus/",headers:s.headers,success:function(){t(i.elt).find(".istex-auth-form").fadeOut({complete:function(){e(null,s)}})},error:function(){r.find("input").removeAttr("disabled"),t(i.elt).find(".istex-auth-form-error").text("Le nom d'utilisateur ou le mot de passe saisi est incorrect.").fadeIn()}}),!1})}})},i.prototype.setupGenericRequester=function(e,i){var s=this;s.istexApiRequester="jsonp"==e?function(e){var s=t.extend({callbackParameter:"callback"},i,e);return t.jsonp(s)}:function(e){var s=t.extend(i,e);return t.ajax(s)}},t.fn[s]=function(e){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new i(this,e))}),this}}(jQuery,window,document),function(t,e,i){function s(e,i){this.elt=e,this.settings=t.extend({},r,istexConfig,i),this._defaults=r,this._name=n,this.init()}var n="istexSearch",r=istexConfigDefault;s.prototype.init=function(){var e=this;t(i).bind(e.settings.connectedEventName,function(t,i){e.istexApiRequester=i.istexApiRequester,e.loadInputForm()}),t(i).bind(e.settings.gotoPageEventName,function(t,i){e.execQuery(null,i)})},s.prototype.loadInputForm=function(){var e=this;t(e.elt).empty();var i=t('<form class="istex-search-form"><div class="istex-search-bar-wrapper"><input class="istex-search-submit" type="submit" value="Rechercher" /><span><input class="istex-search-input" type="search" value="" placeholder="Votre requête ici ..." /></span></div><p class="istex-search-error"></p><div class="istex-search-loading" title="Recherche en cours"></div></form>').hide();t(e.elt).append(i),i.fadeIn(),t(e.elt).find(".istex-search-input").val(e.settings.query),t(e.elt).find(".istex-search-form").submit(function(){var i=t(e.elt).find("input.istex-search-input").val().trim();return i=i?i:"*",e.execQuery(i),!1}),t(e.elt).find(".istex-search-submit").css("font-size",t(e.elt).find(".istex-search-input").css("font-size")),t(e.elt).find(".istex-search-submit").css("padding",t(e.elt).find(".istex-search-input").css("padding")),e.settings.query&&t(e.elt).find(".istex-search-form").trigger("submit")},s.prototype.execQuery=function(e,i){var s=this;i=i||1,e?s.query=e:e=s.query,s.queryStartTime=new Date,t.event.trigger(s.settings.waitingForResultsEventName,[s]),t(s.elt).find(".istex-search-loading").show(),t(s.elt).find(".istex-search-error").hide(),s.istexApiRequester({url:s.settings.istexApi+"/document/",data:{q:e,output:"*",size:s.settings.pageSize,from:(i-1)*s.settings.pageSize},success:function(e){t(s.elt).find(".istex-search-error").hide(),t(s.elt).find(".istex-search-loading").fadeOut(),t.event.trigger(s.settings.resultsEventName,[e,s])},error:function(){t(s.elt).find(".istex-search-error").html('<a href="https://api.istex.fr/corpus/">API Istex</a> non joignable.'),t(s.elt).find(".istex-search-error").fadeIn(),t(s.elt).find(".istex-search-loading").fadeOut(),t.event.trigger(s.settings.resultsEventName,[null,s])}})},t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new s(this,e))}),this}}(jQuery,window,document),function(t,e,i){function s(e,i){this.elt=e,this.settings=t.extend({},a,istexConfig,i),this._defaults=a,this._name=r,this.init()}function n(t){t+="";for(var e=t.split("."),i=e[0],s=e.length>1?"."+e[1]:"",n=/(\d+)(\d{3})/;n.test(i);)i=i.replace(n,"$1 $2");return i+s}var r="istexResults",a=istexConfigDefault;s.prototype.init=function(){var e=this;e.tpl={},e.tpl.stats=t('<div class="istex-results-items-stats">Environ 783 594 résultats</div>'),e.tpl.pagination=t('<div class="istex-results-pagination"><button class="istex-results-pagination-prec" title="Page précédente">Page précédente</button><ul class="istex-results-pagination-plist"><li class="istex-results-pagination-page-selected">1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul><button class="istex-results-pagination-next" title="Page suivante">Page suivante</button></div>'),e.tpl.items=t('<ol class="istex-results-items"></ol>'),e.tpl.item=t('<li class="istex-results-item"><a class="istex-results-item-title" target="_blank">Biomechanical Simulation of Electrode Migration for Deep Brain Stimulation</a><p class="istex-results-item-abstract">Developing a whole brain simulator, a computer simulation in modeling brain structure and functionality of human, is the ultimate goal of Brain Informatics. Brain simulator helps researchers cross the bridge between the cognitive behavior/decease, and the neurophysiology. Brain simulators development is still in infant stage. Current simulators mostly consider the neuron as the basic functional component. This paper starts with introducing the background and current status of brain simulator. Then, an extensible brain simulator development framework is proposed. From information technology perspective, we adopt overlay and peer-to-peer network to deal with the complexity of brain network. Moreover, layered design with object-oriented brain class hierarchy forms the flexible development framework of the proposed simulator. The proposed brain simulator is evolved in case-based incremental delivery style. The power of the simulator will grow along with more research cases from cognitive and clinical neuroscience.</p><div class="istex-results-item-corpus">springer</div><ul class="istex-results-item-download"><li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-pdf" title="Télécharger le PDF"></a></li><li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-mods" title="Télécharger les métadonnées MODS"></a></li></ul><div class="istex-results-item-bottom"></div></li>'),e.tpl.dlItem={},e.tpl.dlItem["default"]=t('<li class="istex-results-item-dl"><a href="#" title="Télécharger le fichier (format inconnu)" target="_blank"></a></li>'),e.tpl.dlItem.mods=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-mods" title="Télécharger les métadonnées MODS" target="_blank"></a></li>'),e.tpl.dlItem.xml=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-xml" title="Télécharger les métadonnées éditeur (XML)" target="_blank"></a></li>'),e.tpl.dlItem.zip=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-zip" title="Télécharger le tout au format ZIP" target="_blank"></a></li>'),e.tpl.dlItem.tiff=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-tiff" title="Télécharger le ou les fichiers TIFF" target="_blank"></a></li>'),e.tpl.dlItem.tei=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-tei" title="Télécharger le plein-texte TEI" target="_blank"></a></li>'),e.tpl.dlItem.txt=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-txt" title="Télécharger le plein-texte TXT" target="_blank"></a></li>'),e.tpl.dlItem.pdf=t('<li class="istex-results-item-dl"><a href="#" class="istex-results-item-dl-pdf" title="Télécharger le plein-texte PDF" target="_blank"></a></li>'),t(i).bind(e.settings.resultsEventName,function(t,i,s){try{e.updateResultsInTheDom(i,s)}catch(n){e.displayErrorInDom("Erreur car le format de l'API Istex a probablement changé. <br/>Merci de le signaler par mail à istex@inist.fr (copie d'écran appréciée)",n)}}),t(i).bind(e.settings.waitingForResultsEventName,function(){t(e.elt).css({opacity:.5})})},s.prototype.updateResultsInTheDom=function(e,i){var s=this;if(!e)return void t(s.elt).empty();var r=new Date-i.queryStartTime,a=s.tpl.stats.clone();if(e.total>0){var l=(r/1e3).toFixed(2),o="Réseau : "+((r-e.stats.elasticsearch.took-e.stats["istex-data"].took-e.stats["istex-rp"].took)/1e3).toFixed(2)+" sec, Moteur de recherche : "+(e.stats.elasticsearch.took/1e3).toFixed(2)+" sec, Traitements de l'API : "+((e.stats["istex-data"].took+e.stats["istex-rp"].took)/1e3).toFixed(2)+" sec",u='<span title="'+o+'">('+l+" secondes)</span>";a.html(s.selectedPage>1?"Page "+s.selectedPage+" sur environ "+n(e.total)+" résultats "+u:"Environ "+n(e.total)+" résultats "+u)}else a.text("Aucun résultat");var c=s.tpl.items.clone().hide();t.each(e.hits,function(e,i){var n=s.tpl.item.clone();n.find(".istex-results-item-title").text(i.title),i.abstract?n.find(".istex-results-item-abstract").text(i.abstract):(n.find(".istex-results-item-abstract").text(""),n.find(".istex-results-item-abstract").attr("title","Pas de résumé")),n.find(".istex-results-item-corpus").text(i.corpusName),n.find(".istex-results-item-download").empty(),t.each(i.fulltext,function(t,e){var i;i=s.tpl.dlItem[e.type]?s.tpl.dlItem[e.type].clone():s.tpl.dlItem["default"].clone(),i.find("a").attr("href",s.fixIstexAPILink(e.uri)),e.type==s.settings.fullTextOnTitle&&n.find(".istex-results-item-title").attr("href",s.fixIstexAPILink(e.uri)),n.find(".istex-results-item-download").append(i)}),t.each(i.metadata,function(t,e){var i;i=s.tpl.dlItem[e.type]?s.tpl.dlItem[e.type].clone():s.tpl.dlItem["default"].clone(),i.find("a").attr("href",s.fixIstexAPILink(e.uri)),n.find(".istex-results-item-download").append(i)});var r=n.find(".istex-results-item-abstract").text();r.length>s.settings.abstractLength&&(r=r.substring(0,s.settings.abstractLength),r+="…",n.find(".istex-results-item-abstract").text(r));var a=n.find(".istex-results-item-title").text();a.length>s.settings.titleLength&&(a=a.substring(0,s.settings.titleLength),a+="…",n.find(".istex-results-item-title").attr("title",n.find(".istex-results-item-title").text()),n.find(".istex-results-item-title").text(a)),c.append(n)}),t(s.elt).empty(),t(s.elt).css({opacity:1}),t(s.elt).append(a),t(s.elt).append(c),c.fadeIn(),e.total>0&&s.updatePaginationInTheDom(s.selectedPage||1,Math.ceil(e.total/s.settings.pageSize))},s.prototype.updatePaginationInTheDom=function(e,i){var s=this;if(s.settings.showPagination){var n,r,a=s.settings.maxPagesInPagination;n=e-Math.round(a/2)+1,r=e+Math.round(a/2),1>n&&(n=1),r>i&&(r=i),a-1>r-n&&(e-n>r-e?n=r-a+1:r=n+a-1);var l=s.tpl.pagination.clone().hide();1==e?l.find(".istex-results-pagination-prec").hide():l.find(".istex-results-pagination-prec").click(function(){s.gotoPage(e-1)}),e==i?l.find(".istex-results-pagination-next").hide():l.find(".istex-results-pagination-next").click(function(){s.gotoPage(e+1)}),l.find("ul.istex-results-pagination-plist").empty();for(var o=n;r>=o;o++){var u=t("<li><a>"+o+"</a></li>").data("page-idx",o);o==e?u.addClass("istex-results-pagination-page-selected"):u.click(function(){s.gotoPage(t(this).data("page-idx"))}),l.find("ul.istex-results-pagination-plist").append(u)}t(s.elt).append(l),l.fadeIn()}},s.prototype.gotoPage=function(e){var i=this;i.selectedPage=e,t.event.trigger(i.settings.gotoPageEventName,[e])},s.prototype.displayErrorInDom=function(e,i){var s=this;t(s.elt).css({opacity:1}),t(s.elt).fadeOut({complete:function(){t(s.elt).empty(),t(s.elt).append('<p class="istex-results-error"><span class="istex-results-error-msg">'+e+'</span><br/><span class="istex-results-error-raw">'+i+"</span></p>"),t(s.elt).fadeIn()}})},s.prototype.fixIstexAPILink=function(t){var e=this;return t.replace("https://api.istex.fr",e.settings.istexApi)},t.fn[r]=function(e){return this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new s(this,e))}),this}}(jQuery,window,document);